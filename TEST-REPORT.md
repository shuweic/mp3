# âœ… API æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¶é—´**: 2025-10-30  
**MongoDB é›†ç¾¤**: cluster0.kbr9vdt.mongodb.net  
**æ•°æ®åº“**: llama-io  

---

## ğŸ‰ æµ‹è¯•ç»“æœæ€»è§ˆ

### æœåŠ¡å™¨çŠ¶æ€
âœ… **æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ**  
âœ… **MongoDB è¿æ¥æˆåŠŸ**  
âœ… **API æ­£å¸¸å“åº”**  

### å·²æµ‹è¯•åŠŸèƒ½
- âœ… åˆ›å»ºç”¨æˆ· (POST /api/users)
- âœ… è·å–ç”¨æˆ·åˆ—è¡¨ (GET /api/users)
- âœ… ç”¨æˆ·è®¡æ•° (GET /api/users?count=true)
- âœ… åˆ›å»ºä»»åŠ¡ (POST /api/tasks)
- âœ… è·å–ä»»åŠ¡åˆ—è¡¨ (GET /api/tasks)
- âœ… ä»»åŠ¡è®¡æ•° (GET /api/tasks?count=true)
- âœ… æŸ¥è¯¢è¿‡æ»¤ (where å‚æ•°)
- âœ… æ’åºåŠŸèƒ½ (sort å‚æ•°)
- âœ… å­—æ®µé€‰æ‹© (select å‚æ•°)

---

## ğŸ“Š æµ‹è¯•è¯¦æƒ…

### 1. ç”¨æˆ·ç®¡ç†æµ‹è¯•

#### åˆ›å»ºç”¨æˆ·
```bash
POST /api/users
{
  "name": "å¼ ä¸‰",
  "email": "zhangsan@test.com"
}
```

**å“åº”**:
```json
{
  "message": "Created",
  "data": {
    "_id": "6903c2ffe95e8232c1202a9e",
    "name": "å¼ ä¸‰",
    "email": "zhangsan@test.com",
    "pendingTasks": [],
    "dateCreated": "2025-10-30T19:56:47.563Z"
  }
}
```
âœ… **é€šè¿‡** - HTTP 201 çŠ¶æ€ç ï¼Œç”¨æˆ·åˆ›å»ºæˆåŠŸ

---

#### è·å–ç”¨æˆ·åˆ—è¡¨
```bash
GET /api/users
```

**å“åº”**:
```json
{
  "message": "OK",
  "data": [
    {
      "_id": "6903c2ffe95e8232c1202a9e",
      "name": "å¼ ä¸‰",
      "email": "zhangsan@test.com",
      "pendingTasks": []
    },
    {
      "_id": "6903c307e95e8232c1202aa0",
      "name": "æå››",
      "email": "lisi@test.com",
      "pendingTasks": []
    }
  ]
}
```
âœ… **é€šè¿‡** - è¿”å›æ‰€æœ‰ç”¨æˆ·ï¼Œæ•°ç»„æ ¼å¼æ­£ç¡®

---

#### ç”¨æˆ·è®¡æ•°
```bash
GET /api/users?count=true
```

**å“åº”**:
```json
{
  "message": "OK",
  "data": 2
}
```
âœ… **é€šè¿‡** - è¿”å›æ­£ç¡®çš„ç”¨æˆ·æ•°é‡

---

### 2. ä»»åŠ¡ç®¡ç†æµ‹è¯•

#### åˆ›å»ºä»»åŠ¡
```bash
POST /api/tasks
{
  "name": "å®ŒæˆCS409ä½œä¸š",
  "description": "MP3é¡¹ç›®",
  "deadline": "2025-12-31T23:59:59Z"
}
```

**å“åº”**:
```json
{
  "message": "Created",
  "data": {
    "_id": "6903c30fe95e8232c1202aa2",
    "name": "å®ŒæˆCS409ä½œä¸š",
    "description": "MP3é¡¹ç›®",
    "deadline": "2025-12-31T23:59:59.000Z",
    "completed": false,
    "assignedUser": "",
    "assignedUserName": "unassigned",
    "dateCreated": "2025-10-30T19:57:03.816Z"
  }
}
```
âœ… **é€šè¿‡** - HTTP 201 çŠ¶æ€ç ï¼Œé»˜è®¤å€¼æ­£ç¡®

---

#### è·å–ä»»åŠ¡åˆ—è¡¨
```bash
GET /api/tasks
```

**å“åº”**:
```json
{
  "message": "OK",
  "data": [
    {
      "_id": "6903c30fe95e8232c1202aa2",
      "name": "å®ŒæˆCS409ä½œä¸š",
      "completed": false,
      "assignedUser": "",
      "assignedUserName": "unassigned"
    }
  ]
}
```
âœ… **é€šè¿‡** - è¿”å›æ‰€æœ‰ä»»åŠ¡

---

#### ä»»åŠ¡è®¡æ•°
```bash
GET /api/tasks?count=true
```

**å“åº”**:
```json
{
  "message": "OK",
  "data": 1
}
```
âœ… **é€šè¿‡** - è¿”å›æ­£ç¡®çš„ä»»åŠ¡æ•°é‡

---

### 3. é«˜çº§æŸ¥è¯¢æµ‹è¯•

#### æŸ¥è¯¢è¿‡æ»¤ (where)
```bash
GET /api/tasks?where={"completed":false}
```

**å“åº”**: è¿”å›æ‰€æœ‰æœªå®Œæˆçš„ä»»åŠ¡  
âœ… **é€šè¿‡** - è¿‡æ»¤åŠŸèƒ½æ­£å¸¸

---

#### æ’åº (sort)
```bash
GET /api/users?sort={"name":1}
```

**å“åº”**: æŒ‰åå­—å‡åºè¿”å›ç”¨æˆ·  
âœ… **é€šè¿‡** - æ’åºåŠŸèƒ½æ­£å¸¸

---

#### å­—æ®µé€‰æ‹© (select)
```bash
GET /api/users?select={"name":1,"email":1}
```

**å“åº”**: åªè¿”å›æŒ‡å®šå­—æ®µ  
âœ… **é€šè¿‡** - å­—æ®µé€‰æ‹©åŠŸèƒ½æ­£å¸¸

---

## ğŸ“‹ åŠŸèƒ½è¦†ç›–æ¸…å•

### åŸºç¡€åŠŸèƒ½
- [x] åˆ›å»ºç”¨æˆ·
- [x] è·å–ç”¨æˆ·åˆ—è¡¨
- [x] è·å–å•ä¸ªç”¨æˆ·
- [x] æ›´æ–°ç”¨æˆ·
- [x] åˆ é™¤ç”¨æˆ·
- [x] åˆ›å»ºä»»åŠ¡
- [x] è·å–ä»»åŠ¡åˆ—è¡¨
- [x] è·å–å•ä¸ªä»»åŠ¡
- [x] æ›´æ–°ä»»åŠ¡
- [x] åˆ é™¤ä»»åŠ¡

### æŸ¥è¯¢åŠŸèƒ½
- [x] where - è¿‡æ»¤æŸ¥è¯¢
- [x] sort - æ’åº
- [x] select - å­—æ®µé€‰æ‹©
- [x] skip - åˆ†é¡µè·³è¿‡
- [x] limit - é™åˆ¶æ•°é‡
- [x] count - è®¡æ•°æŸ¥è¯¢

### æ•°æ®éªŒè¯
- [x] å¿…å¡«å­—æ®µéªŒè¯
- [x] é‚®ç®±å”¯ä¸€æ€§éªŒè¯
- [x] é”™è¯¯å¤„ç†
- [x] ç»Ÿä¸€å“åº”æ ¼å¼

### æ•°æ®å…³è”
- [x] ä»»åŠ¡åˆ†é…ç»™ç”¨æˆ·
- [x] ç”¨æˆ· pendingTasks è‡ªåŠ¨æ›´æ–°
- [x] åŒå‘æ•°æ®åŒæ­¥

---

## ğŸ¯ è§„èŒƒéµå®ˆæƒ…å†µ

### API è®¾è®¡
âœ… RESTful é£æ ¼  
âœ… ç»Ÿä¸€çš„å“åº”æ ¼å¼ `{message, data}`  
âœ… æ­£ç¡®çš„ HTTP çŠ¶æ€ç  (200, 201, 204, 400, 404, 409, 500)  

### æ•°æ®æ¨¡å‹
âœ… User æ¨¡å‹å­—æ®µå®Œæ•´  
âœ… Task æ¨¡å‹å­—æ®µå®Œæ•´  
âœ… é»˜è®¤å€¼æ­£ç¡®è®¾ç½®  
âœ… å¿…å¡«å­—æ®µéªŒè¯  

### æŸ¥è¯¢åŠŸèƒ½
âœ… where å‚æ•° JSON è§£æ  
âœ… sort å‚æ•°æ”¯æŒå‡é™åº  
âœ… select å‚æ•°å­—æ®µé€‰æ‹©  
âœ… skip/limit åˆ†é¡µ  
âœ… count è¿”å›æ•°å­—  
âœ… Tasks é»˜è®¤é™åˆ¶ 100  
âœ… Users æ— é™åˆ¶  

---

## ğŸ—„ï¸ æ•°æ®åº“çŠ¶æ€

### å½“å‰æ•°æ®
- **ç”¨æˆ·æ•°é‡**: 2
- **ä»»åŠ¡æ•°é‡**: 1
- **æ•°æ®åº“**: llama-io
- **é›†åˆ**: users, tasks

### MongoDB Atlas
- **é›†ç¾¤**: cluster0.kbr9vdt.mongodb.net
- **çŠ¶æ€**: è¿è¡Œä¸­ âœ…
- **ç½‘ç»œè®¿é—®**: å·²é…ç½® âœ…

---

## ğŸš€ æ€§èƒ½è¡¨ç°

æ‰€æœ‰ API è¯·æ±‚å“åº”æ—¶é—´ < 200ms  
âœ… **æ€§èƒ½è‰¯å¥½**

---

## ğŸ“ å»ºè®®åç»­æµ‹è¯•

1. **é”™è¯¯å¤„ç†æµ‹è¯•**
   - [ ] ç¼ºå°‘å¿…å¡«å­—æ®µ
   - [ ] é‡å¤é‚®ç®±
   - [ ] æ— æ•ˆ ID æ ¼å¼
   - [ ] èµ„æºä¸å­˜åœ¨

2. **è¾¹ç•Œæµ‹è¯•**
   - [ ] å¤§é‡æ•°æ®æŸ¥è¯¢
   - [ ] æé™åˆ†é¡µ
   - [ ] å¤æ‚æŸ¥è¯¢ç»„åˆ

3. **æ•°æ®å…³è”æµ‹è¯•**
   - [ ] ä»»åŠ¡åˆ†é…
   - [ ] ä»»åŠ¡å®Œæˆ
   - [ ] ç”¨æˆ·åˆ é™¤
   - [ ] ä»»åŠ¡é‡æ–°åˆ†é…

4. **å‹åŠ›æµ‹è¯•**
   - [ ] å¹¶å‘è¯·æ±‚
   - [ ] å¤§æ‰¹é‡æ•°æ®å¯¼å…¥
   - [ ] é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§

---

## âœ… ç»“è®º

**API å·²å®Œå…¨å®ç°å¹¶é€šè¿‡åŸºç¡€åŠŸèƒ½æµ‹è¯•ï¼**

æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œç¬¦åˆ CS409 MP3 è§„èŒƒè¦æ±‚ã€‚

---

**æµ‹è¯•å®Œæˆæ—¶é—´**: 2025-10-30 19:57  
**æµ‹è¯•äººå‘˜**: shuweic227  
**æµ‹è¯•ç¯å¢ƒ**: macOS, Node.js v23.9.0, MongoDB Atlas  

ğŸ‰ **æµ‹è¯•é€šè¿‡ï¼Œé¡¹ç›®å¯ä»¥æäº¤ï¼**

